# 简介 #
使用 `youtube-dl` 下载 bilibili 视频后，合并视频分段。
在B站切换到dash前，视频都是分段存储的， `youtube-dl` 能够下载这些分段但是不会自动合并，需要用户手动合并。启用dash后上传的视频下载后会被自动合并，用户所见为单一格式。

例如

```powershell
PS /media/file/bili> gci -Filter *.flv|ForEach-Object -Process{if($_.name -match ".*_part\d+\.flv") {Write-Host $_.name}}
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part1.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part2.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part3.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part4.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part5.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part6.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part7.flv
[史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611_part8.flv
```

## 用法 ##

该脚本放置于视频分段所在的文件夹，将使用 `ffmpeg` 合并所有分段。因此需要把 `ffmpeg` 放到可以搜索到的路径下，Unix 推荐 `/usr/local/bin/` ； Windows 推荐 `c:\Windows`，转换后的文件格式如下 

> [史密森尼]航拍美国 S01E01 加利福尼亚 (2010) [原创中字]-7407611.mp4

**注意不会检查磁盘剩余空间大小**

**注意会写入系统临时文件夹** (ffmpeg concat demuxer 的列表文件)，这个文件会自动删除

**成功合并后会删除分段文件**